{"ast":null,"code":"// Same origin calls: Nginx proxies /v1/* to FastAPI.\nconst API_BASE=\"\";// empty = same domain\nexport async function startPairing(orgId){const res=await fetch(\"\".concat(API_BASE,\"/v1/pairing/start\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({org_id:orgId})});if(!res.ok)throw new Error(\"pairing failed: \".concat(res.status));return res.json();// { pairing_code, expires_at }\n}// WebSocket stream for live events/alerts\nexport function openStream(onMessage){const proto=window.location.protocol===\"https:\"?\"wss\":\"ws\";const ws=new WebSocket(\"\".concat(proto,\"://\").concat(window.location.host,\"/v1/stream\"));ws.onmessage=e=>{try{onMessage(JSON.parse(e.data));}catch(_unused){}};return ws;}","map":{"version":3,"names":["API_BASE","startPairing","orgId","res","fetch","concat","method","headers","body","JSON","stringify","org_id","ok","Error","status","json","openStream","onMessage","proto","window","location","protocol","ws","WebSocket","host","onmessage","e","parse","data","_unused"],"sources":["/var/www/redscan-frontend/src/api.js"],"sourcesContent":["// Same origin calls: Nginx proxies /v1/* to FastAPI.\nconst API_BASE = \"\"; // empty = same domain\n\nexport async function startPairing(orgId) {\n  const res = await fetch(`${API_BASE}/v1/pairing/start`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ org_id: orgId })\n  });\n  if (!res.ok) throw new Error(`pairing failed: ${res.status}`);\n  return res.json(); // { pairing_code, expires_at }\n}\n\n// WebSocket stream for live events/alerts\nexport function openStream(onMessage){\n  const proto = window.location.protocol === \"https:\" ? \"wss\" : \"ws\";\n  const ws = new WebSocket(`${proto}://${window.location.host}/v1/stream`);\n  ws.onmessage = (e) => {\n    try { onMessage(JSON.parse(e.data)); } catch {}\n  };\n  return ws;\n}\n\n"],"mappings":"AAAA;AACA,KAAM,CAAAA,QAAQ,CAAG,EAAE,CAAE;AAErB,MAAO,eAAe,CAAAC,YAAYA,CAACC,KAAK,CAAE,CACxC,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIL,QAAQ,sBAAqB,CACtDM,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,MAAM,CAAET,KAAM,CAAC,CACxC,CAAC,CAAC,CACF,GAAI,CAACC,GAAG,CAACS,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,oBAAAR,MAAA,CAAoBF,GAAG,CAACW,MAAM,CAAE,CAAC,CAC7D,MAAO,CAAAX,GAAG,CAACY,IAAI,CAAC,CAAC,CAAE;AACrB,CAEA;AACA,MAAO,SAAS,CAAAC,UAAUA,CAACC,SAAS,CAAC,CACnC,KAAM,CAAAC,KAAK,CAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,GAAK,QAAQ,CAAG,KAAK,CAAG,IAAI,CAClE,KAAM,CAAAC,EAAE,CAAG,GAAI,CAAAC,SAAS,IAAAlB,MAAA,CAAIa,KAAK,QAAAb,MAAA,CAAMc,MAAM,CAACC,QAAQ,CAACI,IAAI,cAAY,CAAC,CACxEF,EAAE,CAACG,SAAS,CAAIC,CAAC,EAAK,CACpB,GAAI,CAAET,SAAS,CAACR,IAAI,CAACkB,KAAK,CAACD,CAAC,CAACE,IAAI,CAAC,CAAC,CAAE,CAAE,MAAAC,OAAA,CAAM,CAAC,CAChD,CAAC,CACD,MAAO,CAAAP,EAAE,CACX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}