{"ast":null,"code":"import React,{useState}from\"react\";import{startPairing}from\"../api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Setup(){const[org,setOrg]=useState(\"org_anon\");const[code,setCode]=useState(\"\");const[expires,setExpires]=useState(null);const[err,setErr]=useState(\"\");async function handlePair(){setErr(\"\");try{const{pairing_code,expires_at}=await startPairing(org);setCode(pairing_code);setExpires(new Date(expires_at*1000).toLocaleTimeString());}catch(e){setErr(String(e));}}return/*#__PURE__*/_jsx(\"div\",{className:\"ra-container space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ra-card ra-glass p-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-emerald-300 mb-2\",children:\"\\uD83D\\uDD17 Pair your device\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-zinc-400 mb-6\",children:[\"1) Click \",/*#__PURE__*/_jsx(\"b\",{children:\"Generate Code\"}),\" \\u2192 2) Download bundle or launcher \\u2192 3) Run it and start streaming events instantly.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 flex-wrap mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{value:org,onChange:e=>setOrg(e.target.value),placeholder:\"Organization ID\",className:\"flex-1 bg-black/40 border border-white/10 rounded px-4 py-2 text-zinc-200 outline-none\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ra-btn ra-btn-primary\",onClick:handlePair,children:\"\\uD83D\\uDE80 Generate Code\"})]}),err&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-400 text-sm mb-3\",children:err}),!code&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"a\",{className:\"ra-btn ra-btn-secondary\",href:\"/downloads/pair_and_run.zip\",children:\"\\u2B07\\uFE0F Download Windows Bundle (ZIP)\"})}),code&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-cyan-300 mt-6\",children:\"Pairing Code\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-mono text-emerald-300 bg-black/40 border border-emerald-400 rounded-lg p-4 text-center ra-glow\",children:code}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-zinc-400 mt-2\",children:[\"Expires at: \",expires]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-3 mt-5\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"ra-btn ra-btn-primary\",href:\"/v1/downloads/pair_cmd?code=\".concat(encodeURIComponent(code)),children:\"\\u2699\\uFE0F Download Launcher (.cmd)\"}),/*#__PURE__*/_jsx(\"a\",{className:\"ra-btn ra-btn-secondary\",href:\"/downloads/pair_and_run.zip\",children:\"\\u2B07\\uFE0F Download Bundle ZIP\"})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm text-zinc-400 mt-6\",children:\"Manual (advanced)\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"bg-black/50 text-emerald-300 text-xs p-3 rounded-lg overflow-x-auto\",children:\"set RS_ENDPOINT=\".concat(window.location.origin,\"\\nset RS_PAIR_CODE=\").concat(code,\"\\nredscan_agent.exe\")})]})]})});}","map":{"version":3,"names":["React","useState","startPairing","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Setup","org","setOrg","code","setCode","expires","setExpires","err","setErr","handlePair","pairing_code","expires_at","Date","toLocaleTimeString","e","String","className","children","value","onChange","target","placeholder","onClick","href","concat","encodeURIComponent","window","location","origin"],"sources":["/var/www/redscan-frontend/src/pages/Setup.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { startPairing } from \"../api\";\n\nexport default function Setup() {\n  const [org, setOrg] = useState(\"org_anon\");\n  const [code, setCode] = useState(\"\");\n  const [expires, setExpires] = useState(null);\n  const [err, setErr] = useState(\"\");\n\n  async function handlePair() {\n    setErr(\"\");\n    try {\n      const { pairing_code, expires_at } = await startPairing(org);\n      setCode(pairing_code);\n      setExpires(new Date(expires_at * 1000).toLocaleTimeString());\n    } catch (e) {\n      setErr(String(e));\n    }\n  }\n\n  return (\n    <div className=\"ra-container space-y-6\">\n      <div className=\"ra-card ra-glass p-8\">\n        <h2 className=\"text-xl font-bold text-emerald-300 mb-2\">üîó Pair your device</h2>\n        <p className=\"text-sm text-zinc-400 mb-6\">\n          1) Click <b>Generate Code</b> ‚Üí 2) Download bundle or launcher ‚Üí 3) Run it\n          and start streaming events instantly.\n        </p>\n\n        <div className=\"flex gap-3 flex-wrap mb-4\">\n          <input\n            value={org}\n            onChange={(e) => setOrg(e.target.value)}\n            placeholder=\"Organization ID\"\n            className=\"flex-1 bg-black/40 border border-white/10 rounded px-4 py-2 text-zinc-200 outline-none\"\n          />\n          <button className=\"ra-btn ra-btn-primary\" onClick={handlePair}>\n            üöÄ Generate Code\n          </button>\n        </div>\n\n        {err && <p className=\"text-red-400 text-sm mb-3\">{err}</p>}\n\n        {!code && (\n          <div className=\"mt-4\">\n            <a className=\"ra-btn ra-btn-secondary\" href=\"/downloads/pair_and_run.zip\">\n              ‚¨áÔ∏è Download Windows Bundle (ZIP)\n            </a>\n          </div>\n        )}\n\n        {code && (\n          <>\n            <h3 className=\"text-lg font-semibold text-cyan-300 mt-6\">Pairing Code</h3>\n            <div className=\"text-2xl font-mono text-emerald-300 bg-black/40 border border-emerald-400 rounded-lg p-4 text-center ra-glow\">\n              {code}\n            </div>\n            <p className=\"text-sm text-zinc-400 mt-2\">Expires at: {expires}</p>\n\n            <div className=\"flex flex-wrap gap-3 mt-5\">\n              <a\n                className=\"ra-btn ra-btn-primary\"\n                href={`/v1/downloads/pair_cmd?code=${encodeURIComponent(code)}`}\n              >\n                ‚öôÔ∏è Download Launcher (.cmd)\n              </a>\n              <a className=\"ra-btn ra-btn-secondary\" href=\"/downloads/pair_and_run.zip\">\n                ‚¨áÔ∏è Download Bundle ZIP\n              </a>\n            </div>\n\n            <h4 className=\"text-sm text-zinc-400 mt-6\">Manual (advanced)</h4>\n            <pre className=\"bg-black/50 text-emerald-300 text-xs p-3 rounded-lg overflow-x-auto\">\n{`set RS_ENDPOINT=${window.location.origin}\nset RS_PAIR_CODE=${code}\nredscan_agent.exe`}\n            </pre>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}